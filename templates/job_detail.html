{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
    .job-header {
        background: linear-gradient(135deg, var(--bg-color) 0%, #e3f2fd 100%);
        padding: 4rem 2rem;
        text-align: center;
        border-bottom: 1px solid #eee;
    }

    .job-title {
        font-size: 2.5rem;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
        font-weight: 700;
    }

    .job-company {
        font-size: 1.5rem;
        color: #555;
        margin-bottom: 2rem;
    }

    .detail-card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        padding: 2.5rem;
        margin-top: -2rem;
        position: relative;
        z-index: 10;
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
    }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
        margin-bottom: 3rem;
        border-bottom: 1px solid #eee;
        padding-bottom: 2rem;
    }

    .info-item h4 {
        color: #888;
        font-size: 0.9rem;
        text-transform: uppercase;
        margin-bottom: 0.5rem;
        letter-spacing: 0.5px;
    }

    .info-item p {
        font-size: 1.2rem;
        font-weight: 600;
        color: #333;
    }

    .description-section {
        margin-bottom: 3rem;
    }

    .description-section h3 {
        color: var(--primary-color);
        margin-bottom: 1rem;
        font-size: 1.5rem;
    }

    .description-section p {
        line-height: 1.8;
        color: #444;
        font-size: 1.1rem;
    }

    .apply-btn-lg {
        display: inline-block;
        background: var(--primary-color);
        color: white;
        padding: 1rem 3rem;
        font-size: 1.2rem;
        border-radius: 50px;
        text-decoration: none;
        font-weight: bold;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .apply-btn-lg:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(26, 35, 126, 0.3);
    }
</style>

<div class="job-header">
    <h1 class="job-title">{{ job.title }}</h1>
    <div class="job-company">at {{ job.company }}</div>
</div>

<div class="container" style="padding-bottom: 4rem;">
    <div class="detail-card">
        <div class="info-grid">
            <div class="info-item">
                <h4>Location</h4>
                <p>üìç {{ job.location }}</p>
            </div>
            <div class="info-item">
                <h4>Type</h4>
                <p>‚è±Ô∏è {{ job.type|title }}</p>
            </div>
            <div class="info-item">
                <h4>Category</h4>
                <p>üè∑Ô∏è {{ job.category|title }}</p>
            </div>
            <div class="info-item">
                <h4>Eligibility</h4>
                <p>üéØ Score {{ job.min_assessment_score }}+</p>
            </div>
        </div>

        <div class="description-section">
            <h3>Job Description</h3>
            <p>{{ job.description }}</p>
        </div>

        <div class="description-section">
            <h3>Requirements & Responsibilities</h3>
            <p>
                As a {{ job.title }}, you will be expected to work closely with the team to deliver high-quality
                results.
                Candidates should have strong problem-solving skills and a passion for learning.
                <br><br>
                For Government roles, please check specific eligibility criteria on the official notification.
            </p>
        </div>

        <div class="description-section">
            <h3>Apply Now</h3>
            <div style="background: #f9f9f9; padding: 2rem; border-radius: 12px; border: 1px solid #eee;">
                <form action="{% url 'apply_for_opportunity' job.id %}" method="POST">
                    {% csrf_token %}
                    <div style="margin-bottom: 1rem; text-align: left;">
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Full Name</label>
                        <input type="text" name="name" value="{{ user.first_name }} {{ user.last_name }}"
                            style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 6px;" required>
                    </div>

                    <div style="margin-bottom: 1rem; text-align: left;">
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Email Address</label>
                        <input type="email" name="email" value="{{ user.email }}"
                            style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 6px;" readonly>
                    </div>

                    <div style="margin-bottom: 1rem; text-align: left;">
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Link to Resume /
                            Portfolio</label>
                        <input type="url" name="resume_link" placeholder="https://linkedin.com/in/..."
                            style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 6px;" required>
                    </div>

                    <button type="submit" class="apply-btn-lg"
                        style="border: none; cursor: pointer; margin-top: 1rem;">Submit Application</button>
                </form>
            </div>

            <div style="margin-top: 2rem;">
                <a href="{% url 'ecosystem' %}" style="color: #666; text-decoration: none;">&larr; Back to Ecosystem</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}